<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.79.1"><meta name=ROBOTS content="INDEX, FOLLOW"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Homing Fiducial | Opulo Docs</title><meta property="og:title" content="Homing Fiducial"><meta property="og:description" content="Setting up the datum board and testing the homing fiducial"><meta property="og:type" content="article"><meta property="og:url" content="https://docs.opulo.io/openpnp/calibration/homing-fiducial/"><meta property="article:modified_time" content="2022-09-23T12:24:33-04:00"><meta property="og:site_name" content="Opulo Docs"><meta itemprop=name content="Homing Fiducial"><meta itemprop=description content="Setting up the datum board and testing the homing fiducial"><meta itemprop=dateModified content="2022-09-23T12:24:33-04:00"><meta itemprop=wordCount content="1384"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Homing Fiducial"><meta name=twitter:description content="Setting up the datum board and testing the homing fiducial"><link rel=preload href=/scss/main.min.6e2cb561824c915a611c33d11e67c1c89afe613f885f5966c1c0dfb47794e3f8.css as=style><link href=/scss/main.min.6e2cb561824c915a611c33d11e67c1c89afe613f885f5966c1c0dfb47794e3f8.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.5.1.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script><script src=https://unpkg.com/lunr@2.3.8/lunr.min.js integrity=sha384-vRQ9bDyE0Wnu+lMfm57BlYLO0/XauFuKpVsZPs7KEDwYKktWi5+Kz3MP8++DFlRY crossorigin=anonymous></script></head><body class=td-page><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/><span class=navbar-logo><svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" version="1.0" width="50" height="50" viewBox="0 0 37.5 37.5" id="svg2015" sodipodi:docname="logo.svg" inkscape:version="0.92.2 5c3e80d, 2017-08-06"><defs id="defs2019"/><sodipodi:namedview pagecolor="#ffffff" bordercolor="#666666" borderopacity="1" objecttolerance="10" gridtolerance="10" guidetolerance="10" inkscape:pageopacity="0" inkscape:pageshadow="2" inkscape:window-width="1736" inkscape:window-height="1074" id="namedview2017" showgrid="false" inkscape:zoom="17.22" inkscape:cx="25" inkscape:cy="25" inkscape:window-x="0" inkscape:window-y="0" inkscape:window-maximized="0" inkscape:current-layer="g2013" units="px"/><g transform="matrix(0.1,0,0,-0.1,0,37.5)" id="g2013" style="fill:#000;stroke:none"><path d="M0 187.5V0H187.5 375V187.5 375H187.5.0zm200.33333 171.16667c1-1 1.33334-3.08334 1.33334-8.58334V342.75l5.25-.58333c23.25-2.66667 51.41666-13.58334 71.41666-27.83334 10.16667-7.16666 28-25 35.16667-35.16666 14.25-20 25.16667-48.16667 27.83333-71.41667l.58334-5.25H349.25c10.08333.0 9.91667.25 9.91667-14.58333.0-14.83334.16666-14.58334-9.91667-14.58334h-7.33333l-.58334-5.16666c-1.75-15.58334-6.75-32.16667-14.25-47.83334C311.66667 88.083333 288.83333 64.833333 256.75 48.75c-15.08333-7.5-34-13.25-49.83333-15l-5.25-.583333v-7.333334c0-10.166666.25-10-14.58334-10C172.25 15.833333 172.5 15.666667 172.5 25.75v7.333333l-5.16667.583334c-16.25 1.833333-34.41666 7.5-51.25 15.916666C99.833333 57.833333 90.25 64.75 77.083333 77.916667 63.916667 91.083333 57 100.66667 48.75 116.91667 40.166667 134 34.666667 151.83333 32.833333 168.16667L32.25 173.33333H24.916667C14.833333 173.33333 15 173.08333 15 187.91667 15 202.75 14.833333 202.5 24.916667 202.5H32.25l.583333 5.25c1.833334 16.25 7.333334 34.08333 15.916667 51.16667 8.25 16.25 15.166667 25.83333 28.333333 39C90.25 311.08333 99.833333 318 116.08333 326.25c17 8.58333 34.58334 14 51.25 15.91667L172.5 342.75v7.33333c0 10.08334-.25 9.91667 14.58333 9.91667 9.75.0 12.16667-.25 13.25-1.33333z" id="path2005" style="fill:none;stroke-width:.08333334" inkscape:connector-curvature="0"/><path d="m177.5 347.08333c0-9.91666.83333-9.08333-9.16667-10C141.41667 334.5 110.25 320.5 87.833333 300.91667 61 277.58333 42.333333 242.83333 38.25 209 36.75 196.16667 38 197.5 27.916667 197.5h-8.75v-9.58333-9.58334h8.75c10 0 8.833333 1.33334 10.333333-11.33333C42.333333 132.91667 61.5 97.5 88.333333 74.416667 110.91667 55.083333 141.75 41.333333 168.33333 38.75c10-.916667 9.16667-.08333 9.16667-10V20h9.58333 9.58334v8.75c0 10.083333-1.33334 8.833333 11.5 10.333333 42.5 5.083334 84.25 32.416667 107.16666 70.249997 11 18.08334 19.16667 41.5 20.91667 59.83334.91667 10 .0833 9.16666 10 9.16666H355v9.58334 9.58333h-8.75c-9.91667.0-9.08333-.83333-10 9.16667-1.91667 20.08333-11.75 46.5-24.33333 65.16666C288.33333 307 248.5 331.91667 208.16667 336.75c-12.83334 1.5-11.5.25-11.5 10.33333v8.75H187.08333 177.5zm0-70V235h9.58333 9.58334v42 42l4-.41667C221.33333 316.5 245 307.66667 262.58333 295.41667c9.83334-6.83334 26.58334-23.91667 33.16667-33.75 12-18.08334 20-39.91667 22-60.16667l.41667-4H303.25 288.33333v-9.58333-9.58334h15 15L318 176.5c-.25-1.08333-.66667-4.08333-.91667-6.75C316.25 162 312.75 148.91667 309.16667 139.66667 296.25 106.66667 268.33333 78.75 235.33333 65.833333 226.08333 62.25 213 58.75 205.25 57.916667 202.58333 57.666667 199.58333 57.25 198.58333 57l-1.91666-.333333v15 15H187.08333 177.5v-15-15L175.66667 57c-1.08334.25-4.08334.666667-6.75.916667C166.25 58.25 160.25 59.416667 155.66667 60.5 106.83333 72.333333 68.166667 112.75 58.5 162.08333c-.916667 4.58334-1.833333 10.08334-2.083333 12.33334L56 178.33333h42 42V187.91667 197.5H98 55.916667l.416666 3.16667c4.166667 32.25 15.5 56.58333 36.333334 78.16666 9.750003 10.08334 18.250003 16.66667 30.083333 23.5 13.5 7.75 32 13.91667 47.66667 15.91667 3.25.33333 6.08333.75 6.5.83333.33333.0.58333-18.83333.58333-42z" id="path2007" style="fill:#fff;fill-opacity:1;stroke-width:.08333334" inkscape:connector-curvature="0"/><path d="M162.33333 311.66667C117.58333 302.25 80.666667 269.08333 66.833333 225.83333 64.75 219.16667 61.666667 205.91667 61.666667 203.25c0-.41667 17.166666-.75 39.916663-.75 35.25.0 40.08334-.16667 41.25-1.33333 1.08334-1.08334 1.33334-3.5 1.33334-13.25s-.25-12.16667-1.33334-13.25c-1.16666-1.16667-6-1.33334-41.25-1.33334-22.749997.0-39.916663-.33333-39.916663-.75.0-2.66666 3.083333-15.91666 5.166666-22.58333C79.166667 111.58333 110.75 80 149.16667 67.666667 155.83333 65.583333 169.08333 62.5 171.75 62.5c.41667.0.75 6 .75 13.25.0 11 .25 13.5 1.33333 14.583333 1.91667 1.916667 24.58334 1.916667 26.5.0C201.41667 89.25 201.66667 86.75 201.66667 75.75c0-7.25.33333-13.25.75-13.25 2.66666.0 15.91666 3.083333 22.58333 5.166667C263.41667 80 295 111.58333 307.33333 150c2.08334 6.66667 5.16667 19.91667 5.16667 22.58333.0.41667-6 .75-13.25.75-11 0-13.5.25-14.58333 1.33334-1.08334 1.08333-1.33334 3.5-1.33334 13.25s.25 12.16666 1.33334 13.25C285.75 202.25 288.25 202.5 299.25 202.5c7.25.0 13.25.33333 13.25.75.0 2.66667-3.08333 15.91667-5.16667 22.58333-6.16666 19.25-16.41666 35.83334-31.41666 50.91667C260.83333 291.75 244.25 302 225 308.16667c-6.66667 2.08333-19.91667 5.16666-22.58333 5.16666-.41667.0-.75-17.16666-.75-39.91666.0-35.25-.16667-40.08334-1.33334-41.25-1.91666-1.91667-24.58333-1.91667-26.5.0-1.16666 1.16666-1.33333 6-1.33333 41.25.0 37.5-.0833 39.91666-1.41667 39.83333-.83333.0-4.75-.75-8.75-1.58333zm38-89.66667c1.08334-1 1.33334-3.25 1.33334-10.41667V202.5H210.75c7.16667.0 9.41667-.25 10.41667-1.33333 1.91666-1.91667 1.91666-24.58334.0-26.5-1-1.08334-3.25-1.33334-10.41667-1.33334h-9.08333V164.25c0-7.16667-.25-9.41667-1.33334-10.41667-1.08333-1.08333-3.5-1.33333-13.25-1.33333s-12.16666.25-13.25 1.33333c-1.08333 1-1.33333 3.25-1.33333 10.41667v9.08333h-9.08333c-7.16667.0-9.41667.25-10.41667 1.33334-1.91667 1.91666-1.91667 24.58333.0 26.5 1 1.08333 3.25 1.33333 10.41667 1.33333H172.5v9.08333c0 7.16667.25 9.41667 1.33333 10.41667 1.91667 1.91667 24.58334 1.91667 26.5.0z" id="path2009" style="fill:none;stroke-width:.08333334" inkscape:connector-curvature="0"/><path d="M177.5 207.91667V197.5h-10.41667-10.41666v-9.58333-9.58334H167.08333 177.5V167.91667 157.5h9.58333 9.58334v10.41667 10.41666H207.08333 217.5v9.58334V197.5h-10.41667-10.41666v10.41667 10.41666H187.08333 177.5z" id="path2011" inkscape:connector-curvature="0" style="stroke-width:.08333334;fill:#fff;fill-opacity:1"/></g></svg></span><span class="text-uppercase font-weight-bold">Opulo Docs</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/semi-assembly/><span>LumenPnP Semi Assembly</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/docs/><span>LumenPnP Kit Assembly</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href=/openpnp/><span class=active>OpenPnP</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/troubleshooting/><span>Troubleshooting</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/maintenance-upgrades/><span>Maintenance and Upgrades</span></a></li></ul></div><div class="navbar-nav d-none d-lg-block"><input type=search class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/offline-search-index.bb978d6c6be202cd5c3131497105dd91.json data-offline-search-base-href=/ data-offline-search-max-results=10></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><form class="td-sidebar__search d-flex align-items-center"><input type=search class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/offline-search-index.bb978d6c6be202cd5c3131497105dd91.json data-offline-search-base-href=/ data-offline-search-max-results=10>
<button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="collapse td-sidebar-nav" id=td-section-nav><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/openpnp/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">OpenPnP</a></li><ul><li class="collapse show" id=openpnp><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/openpnp/calibration/ class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">Calibration</a></li><ul><li class="collapse show" id=openpnpcalibration><a class="td-sidebar-link td-sidebar-link__page" id=m-openpnpcalibrationimport-config href=/openpnp/calibration/import-config/>Importing Config Files</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-openpnpcalibrationconnect-to-machine href=/openpnp/calibration/connect-to-machine/>Connecting to Your Machine</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-openpnpcalibrationcamera-fisheye-cal href=/openpnp/calibration/camera-fisheye-cal/>Camera Fisheye Calibration</a>
<a class="td-sidebar-link td-sidebar-link__page active" id=m-openpnpcalibrationhoming-fiducial href=/openpnp/calibration/homing-fiducial/>Homing Fiducial</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-openpnpcalibrationmm-per-pixel href=/openpnp/calibration/mm-per-pixel/>MM/Pixel Calibration</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-openpnpcalibrationbacklash-compensation href=/openpnp/calibration/backlash-compensation/>Backlash Compensation</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-openpnpcalibrationnozzle-offset href=/openpnp/calibration/nozzle-offset/>Nozzle Offset Calibration</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-openpnpcalibrationbottom-camera-position href=/openpnp/calibration/bottom-camera-position/>Bottom Camera Position</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-openpnpcalibrationauto-toolchanger href=/openpnp/calibration/auto-toolchanger/>Automatic Toolchanger Calibration</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/openpnp/ftp/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">FTP</a></li><ul><li class=collapse id=openpnpftp><a class="td-sidebar-link td-sidebar-link__page" id=m-openpnpftpinstalling-the-feeders href=/openpnp/ftp/installing-the-feeders/>Installing the Feeders</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-openpnpftpsetting-up-the-board href=/openpnp/ftp/setting-up-the-board/>Setting up the FTP Board</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/openpnp/next-steps/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Next Steps</a></li><ul><li class=collapse id=openpnpnext-steps></li></ul></ul></li></ul></ul></nav></div></div><div class="d-none d-xl-block col-xl-2 td-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"><a href=https://github.com/opulo-inc/docs/edit/master/content/en/openpnp/calibration/homing-fiducial/index.md target=_blank><i class="fa fa-edit fa-fw"></i>Edit this page</a>
<a href="https://github.com/opulo-inc/docs/new/master/content/en/openpnp/calibration/homing-fiducial/index.md?filename=change-me.md&value=---%0Atitle%3A+%22Long+Page+Title%22%0AlinkTitle%3A+%22Short+Nav+Title%22%0Aweight%3A+100%0Adescription%3A+%3E-%0A+++++Page+description+for+heading+and+indexes.%0A---%0A%0A%23%23+Heading%0A%0AEdit+this+template+to+create+your+new+page.%0A%0A%2A+Give+it+a+good+name%2C+ending+in+%60.md%60+-+e.g.+%60getting-started.md%60%0A%2A+Edit+the+%22front+matter%22+section+at+the+top+of+the+page+%28weight+controls+how+its+ordered+amongst+other+pages+in+the+same+directory%3B+lowest+number+first%29.%0A%2A+Add+a+good+commit+message+at+the+bottom+of+the+page+%28%3C80+characters%3B+use+the+extended+description+field+for+more+detail%29.%0A%2A+Create+a+new+branch+so+you+can+preview+your+new+file+and+request+a+review+via+Pull+Request.%0A" target=_blank><i class="fa fa-edit fa-fw"></i>Create child page</a>
<a href="https://github.com/opulo-inc/docs/issues/new?title=Homing%20Fiducial" target=_blank><i class="fab fa-github fa-fw"></i>Create documentation issue</a>
<a id=print href=https://docs.opulo.io/openpnp/calibration/_print/><i class="fa fa-print fa-fw"></i>Print entire section</a></div><nav id=TableOfContents><ul><li><a href=#tuning-the-homing-fiducial>Tuning the Homing Fiducial</a></li><li><a href=#check-camera-exposure>Check Camera Exposure</a></li><li><a href=#apply-homing-fiducial-changes>Apply Homing Fiducial Changes</a></li><li><a href=#troubleshooting-vision-pipeline-adjustment>Troubleshooting: Vision Pipeline Adjustment</a></li></ul></nav></div><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><nav aria-label=breadcrumb class="d-none d-md-block d-print-none"><ol class="breadcrumb spb-1"><li class=breadcrumb-item><a href=https://docs.opulo.io/openpnp/>OpenPnP</a></li><li class=breadcrumb-item><a href=https://docs.opulo.io/openpnp/calibration/>Calibration</a></li><li class="breadcrumb-item active" aria-current=page><a href=https://docs.opulo.io/openpnp/calibration/homing-fiducial/>Homing Fiducial</a></li></ol></nav><div class=td-content><h1>Homing Fiducial</h1><div class=lead>Setting up the datum board and testing the homing fiducial</div><p>Now that fisheye calibration is complete, we can set up the datum board. The datum board is a reference point for everything else you&rsquo;ll do with the machine. The center dot of the datum board will be the most important calibration point for the machine. It&rsquo;ll be used to fine-tune the LumenPnP&rsquo;s XY position after homing to account for any errors in the limit switches.</p><div class="alert alert-warning" role=alert><h4 class=alert-heading>If Your Machine Is v2</h4><p>If you are setting up a <code>v2</code> machine, your datum board is not yet mounted to the Staging Plate.</p><p>Use four M3x16mm screws and four M3 nuts to secure the datum board and datum board mount to the staging plate on the rear of the bottom camera, through holes: B18, A19, A21, B22. The the fisheye calibration pattern should be facing down, and the gold grid of lines and fiducial in the center of the Opulo logo facing upwards. Tighten this down securely.</p><figure><img src=https://docs.opulo.io/openpnp/calibration/homing-fiducial/images/Screen%20Shot%202022-01-11%20at%2012.51.47%20PM_hu3871e0f1e06af5e9f4bfd668c8376cd1_705927_800x600_fit_catmullrom_2.png alt="the mounting location for the datum board and holder"></figure></div><ol><li>In the &ldquo;Machine Controls&rdquo; pane in the lower left, connect to the LumenPnP if you haven&rsquo;t already by pressing the power button.</li><li>Run a rough home routine by pressing the Home button (shaped like a house). The machine will move to the X, Y, and Z zero positions. The default machine configuration files are set so that OpenPnP will <em>not</em> try to use the homing fiducial yet. Note that the home icon will turn yellow, as the LumenPnP has homed to it&rsquo;s end stops, but hasn&rsquo;t completed its full homing routine.<figure><img src=https://docs.opulo.io/openpnp/calibration/homing-fiducial/images/Connect-and-home_hu878b8b02b21cf6aad7217e2cce3f6c33_399285_800x600_fit_catmullrom_2.png alt="Connect to the LumenPnP and attempt to home it"></figure></li></ol><h2 id=tuning-the-homing-fiducial>Tuning the Homing Fiducial</h2><ol start=3><li><p>Click on the <code>Machine Setup</code> tab in the top right pane.<figure><img src=https://docs.opulo.io/openpnp/calibration/homing-fiducial/images/Machine-Setup-Tab_hu9becbda77ddecaeccc8b522f7a08fc57_149296_800x600_fit_catmullrom_2.png alt="Selecting the Machine setup tab from the main screen"></figure></p></li><li><p>Click on the &ldquo;Expand&rdquo; checkbox to open all of the features about your machine.<figure><img src=https://docs.opulo.io/openpnp/calibration/homing-fiducial/images/Expand-Checkbox_huf038785efff1acdfda3bdd293aeb869c_201594_800x600_fit_catmullrom_2.png alt="Expanding the Machine Config options"></figure></p></li><li><p>Under <code>Heads</code>, click on <code>ReferenceHead H1</code><figure><img src=https://docs.opulo.io/openpnp/calibration/homing-fiducial/images/Select-Reference-Head-H1_huf636f77a2d551124ea71699849172ab4_400566_800x600_fit_catmullrom_2.png alt="Reviewing the ReferenceHead options"></figure></p></li><li><p>In the bottom right details pane, you&rsquo;ll be looking at the <code>Configuration</code> Tab. Change the <code>Homing Method</code> to <code>ResetToFiducialLocation</code>. This will set OpenPnP to use the top camera to look for the homing fiducial to more precisely home the XY gantry, instead of only using the limit switches.<figure><img src=https://docs.opulo.io/openpnp/calibration/homing-fiducial/images/Select-ResetToFiducialLocation_huc542783d5e9b9613c20616f2f867f8f3_398619_800x600_fit_catmullrom_2.png alt="Switch to using the homing fiducial"></figure></p></li><li><p>Click <code>Apply</code> to save this change.<figure><img src=https://docs.opulo.io/openpnp/calibration/homing-fiducial/images/Homing-fiducial-apply_hu4849e2d96494b4ec930a4595a4a2c504_403085_800x600_fit_catmullrom_2.png alt="Save the homing technique"></figure></p></li><li><p>Click on the &ldquo;Position Camera over location&rdquo; icon button show below. This will move the top camera to approximately where your datum board is mounted.<figure><img src=https://docs.opulo.io/openpnp/calibration/homing-fiducial/images/Position-camera-over-homing-fiducial_huf3fa0cd51c56180c162bad6a3da8b092_407721_800x600_fit_catmullrom_2.png alt="Position top camera over homing fiducial"></figure></p></li><li><p>In the bottom left Machine Controls pane, Select the <code>Actuators</code> tab.<figure><img src=https://docs.opulo.io/openpnp/calibration/homing-fiducial/images/Actuators-tab_hu34ccfcb97d74441c6b8019e501efeb16_403495_800x600_fit_catmullrom_2.png alt="Switch to the Actuators Tab"></figure></p></li><li><p>Toggle on the LED ring lights by pressing the <code>LED</code> button.<figure><img src=https://docs.opulo.io/openpnp/calibration/homing-fiducial/images/Turn-on-LEDs_hu37f630a3310747b62d2bdf6189df9425_406578_800x600_fit_catmullrom_2.png alt="Turn on the LEDs"></figure></p></li><li><p>If the fiducial board is not in focus, rotate the Top Camera lens until the board is sharply in focus.<figure><img src=https://docs.opulo.io/openpnp/calibration/homing-fiducial/images/In-focus-homing-fiducial_hu436b1a4759aeace3aad4d6f5c86dcdbe_446368_800x600_fit_catmullrom_2.png alt="Turn on the LEDs"></figure></p></li></ol><div class="alert alert-info" role=alert><h4 class=alert-heading>Tip</h4><p>Right click on the camera feed to change the Reticle style to see the center of the camera image. You can also use the scroll wheel to zoom in on the feed for more precision.</p><figure><img src=https://docs.opulo.io/openpnp/calibration/homing-fiducial/images/Switch-reticle-type_hu3e0ac36ce14c9c1865147ab4266b6c31_423249_800x600_fit_catmullrom_2.png alt="Change the reticle that appears on the camera feed"></figure></div><ol start=13><li>Go back to the <code>Jog</code> tab in the &ldquo;Machine Controls&rdquo; pane.<figure><img src=https://docs.opulo.io/openpnp/calibration/homing-fiducial/images/Jog-tab_huee90190c5b366dc783f1df2b7e6d605b_478092_800x600_fit_catmullrom_2.png alt="Switch to the jog tab"></figure></li><li>Set the <code>Distance</code> slider to <code>0.1</code> for more precise movements.<figure><img src=https://docs.opulo.io/openpnp/calibration/homing-fiducial/images/Distance-slider-0pt1_hu1e2e515ad763ef6cbf5801f652141684_482204_800x600_fit_catmullrom_2.png alt="Make the jog controls more precise"></figure></li><li>Manually jog the head so that the reticle in the center of the Top Camera feed in your top camera view is perfectly centered on the Homing Fiducial in the center of the Opulo logo.<figure><img src=https://docs.opulo.io/openpnp/calibration/homing-fiducial/images/Homing-fiducial-centered_hu0d7284a2e039c67e818fea0f39c64158_504968_800x600_fit_catmullrom_2.png alt="Center the homing fiducial in the camera view"></figure></li></ol><h2 id=check-camera-exposure>Check Camera Exposure</h2><p>Set the exposure for the top camera so that we&rsquo;re seeing the homing fiducial clearly and sharply.</p><ol start=16><li><p>Navigate to the <code>Machine Setup</code> tab<figure><img src=https://docs.opulo.io/openpnp/calibration/homing-fiducial/images/Machine-Setup-Tab_hu9becbda77ddecaeccc8b522f7a08fc57_149296_800x600_fit_catmullrom_2.png alt="Selecting the Machine setup tab from the main screen"></figure></p></li><li><p>Click the &ldquo;Expand&rdquo; checkbox if necessary<figure><img src=https://docs.opulo.io/openpnp/calibration/homing-fiducial/images/Expand-Checkbox_huf038785efff1acdfda3bdd293aeb869c_201594_800x600_fit_catmullrom_2.png alt="Expanding the Machine Config options"></figure></p></li><li><p>Navigate to <code>Heads > ReferenceHead H1 > Cameras > OpenPnPCaptureCamera Top</code><figure><img src=https://docs.opulo.io/openpnp/calibration/homing-fiducial/images/Top-camera-settings_hu682374ddcdf571115ab1e5870eb9e672_218156_800x600_fit_catmullrom_2.png alt="Finding the Top Camera Settings"></figure></p></li><li><p>In the lower detail pane, switch to the <code>Device Settings</code> tab<figure><img src=https://docs.opulo.io/openpnp/calibration/homing-fiducial/images/Top-camera-device-settings_hu54265124499489fd2a5b32b5fd562263_229215_800x600_fit_catmullrom_2.png alt="Switching to the camera device settings"></figure></p></li><li><p>Scroll down if necessary to the <code>Properties</code> list of adjustments for the camera image.<figure><img src=https://docs.opulo.io/openpnp/calibration/homing-fiducial/images/Top-camera-properties_hu1a205294ef83ec2281157e6da3eef155_386438_800x600_fit_catmullrom_2.png alt="Top camera properties"></figure></p></li><li><p>The goal here is to make the center fiducial look bright and sharp, and have the surrounding soldermask look dark. In most cases you can simply check the <code>Auto</code> checkbox for <code>Exposure</code>, then uncheck it to save the automatically set value, and this does a good job of making the image look how you want. Note that this may not work in all situations, so you may need to manually adjust the image settings to get a clear image, where the Homing Fiducial is clearly distinguished against the background of the datum board.<figure><img src=https://docs.opulo.io/openpnp/calibration/homing-fiducial/images/Auto-exposure-on_hue6840cb5d3b433e112436e5a4e79a15b_438989_800x600_fit_catmullrom_2.png alt="Top camera properly exposed with the auto-exposure turned on"></figure></p></li></ol><div class="alert alert-danger" role=alert><h4 class=alert-heading>For Mac Users</h4>Due to an issue with the camera driver in OpenPnP, some Mac users might notice that the image settings are greyed out for you. There&rsquo;s a fantastic open-source application called <a href=https://github.com/Itaybre/CameraController>CameraController</a> that can be used to edit these settings!</div><h2 id=apply-homing-fiducial-changes>Apply Homing Fiducial Changes</h2><ol start=19><li><p>Double-check that:</p><ol><li>The Homing Fiducial is in the center of the reticle in the camera feed</li><li>The camera image is in sharp focus</li><li>The camera image is properly exposed</li></ol></li><li><p>Go back to Machine Setup and select <code>Heads > ReferenceHead H1</code>.<figure><img src=https://docs.opulo.io/openpnp/calibration/homing-fiducial/images/Select-Reference-Head-H1_huf636f77a2d551124ea71699849172ab4_400566_800x600_fit_catmullrom_2.png alt="Return to the homing fiducial location settings"></figure></p></li><li><p>Click on the &ldquo;Capture Location&rdquo; icon button to save the location where OpenPnP will start searching for the Homing Fiducial.<figure><img src=https://docs.opulo.io/openpnp/calibration/homing-fiducial/images/Capture-homing-fiducial-location_hud6884041bd256ea6d66c91423452843d_519972_800x600_fit_catmullrom_2.png alt="Capture the location of the homing fiducial"></figure></p></li><li><p>Click <code>Apply</code> to save your changes.<figure><img src=https://docs.opulo.io/openpnp/calibration/homing-fiducial/images/Homing-fiducial-apply_hu4849e2d96494b4ec930a4595a4a2c504_403085_800x600_fit_catmullrom_2.png alt="Save homing fiducial location"></figure></p></li><li><p>Click on the &ldquo;Home&rdquo; button in the <code>Machine Controls Pane > Jog Tab</code> and watch your machine home using the limit switches, then move the top camera over the homing fiducial and find its exact location.</p></li></ol><h2 id=troubleshooting-vision-pipeline-adjustment>Troubleshooting: Vision Pipeline Adjustment</h2><ol start=24><li><p>If you find that the machine is having a hard time finding the homing fiducial, you might need to edit the Vision Pipeline for it. You can do that by going to the <code>Machine Setup</code> tab, and selecting <code>Fiducial Locator</code> under <code>Vision</code>. Click the <code>Edit</code> button to adjust the computer vision settings.<figure><img src=https://docs.opulo.io/openpnp/calibration/homing-fiducial/images/Screen%20Shot%202022-05-18%20at%202.22.00%20PM_hu9a071cd0e1adf4944c035e71f0b4f929_109764_800x600_fit_catmullrom_2.png alt></figure></p></li><li><p>There is quite a bit to tuning a vision pipeline, and you should take a look at the <a href=https://github.com/openpnp/openpnp/wiki/Bottom-Vision>OpenPnP documentation</a>. But there are a few things you can pretty easily tweak to get up and running. First, let&rsquo;s check out what the vision pipeline <em>thinks</em> it&rsquo;s seeing. In the window that just popped up, click on the row with &ldquo;DrawCircles&rdquo; in the Stage column. The image will show you every circle detected from the pipeline, as shown below. If there is more than one, or if the one shown is not perfectly hugging the fiducial, there are tweaks to be made. The image below shows a correctly tuned pipeline, with a single circle encircling the fiducial.</p></li></ol><figure><img src=https://docs.opulo.io/openpnp/calibration/homing-fiducial/images/Screen%20Shot%202022-05-18%20at%202.41.29%20PM_hu1df961fb245c11c20917b35e50176843_2682214_800x600_fit_catmullrom_2.png alt></figure><ol start=11><li>The first variable to address is the threshold value. To access these settings, click on the row with &ldquo;Threshold&rdquo; under the Stage column. If the threshold is too low, then we won&rsquo;t be isolating the area around the fiducial enough. A too low of a threshold value will look like the image below:</li></ol><figure><img src=https://docs.opulo.io/openpnp/calibration/homing-fiducial/images/Screen%20Shot%202022-05-18%20at%202.25.13%20PM_hufa159e9e91836849043931444e5b6511_291035_800x600_fit_catmullrom_2.png alt></figure><p>Raise the value until the fiducial is a clean, solid circle, as shown below:</p><figure><img src=https://docs.opulo.io/openpnp/calibration/homing-fiducial/images/Screen%20Shot%202022-05-18%20at%202.25.59%20PM_hud6b60e82215d5cc6b1a3e7a85f250d0d_284448_800x600_fit_catmullrom_2.png alt></figure><ol start=11><li>Next, we can check and see how many circles the pipeline is finding. We want it to only be finding one, and have it hug the fiducial exactly. Click on the row with &ldquo;DetectCirclesHough&rdquo; in the Stage column. In the image below, you can see from the list in the bottom right that two circles have been detected. We can solve this by adjusting &ldquo;param2&rdquo; and bumping the value up. The lower the value, the more circles are detected. If the diameter of the circles detected is incorrect, adjust the maxDiameter and minDiameter settings.</li></ol><figure><img src=https://docs.opulo.io/openpnp/calibration/homing-fiducial/images/Screen%20Shot%202022-05-18%20at%202.26.48%20PM_hud6b60e82215d5cc6b1a3e7a85f250d0d_302476_800x600_fit_catmullrom_2.png alt></figure><p>With a higher value in the &ldquo;param2&rdquo; field, we only detect a single circle.</p><figure><img src=https://docs.opulo.io/openpnp/calibration/homing-fiducial/images/Screen%20Shot%202022-05-18%20at%202.27.08%20PM_hue434d16e9230f350073847ad19ffcabe_276517_800x600_fit_catmullrom_2.png alt></figure><ol start=12><li>Lastly, you can confirm that the changes result in accurate fiducial detection. Once again click on the row with &ldquo;DrawCircles&rdquo; in the Stage column. The image will show you every circle detected from the pipeline. Confirm there is only one, and it is perfectly hugging the fiducial as shown below.</li></ol><figure><img src=https://docs.opulo.io/openpnp/calibration/homing-fiducial/images/Screen%20Shot%202022-05-18%20at%202.41.29%20PM_hu1df961fb245c11c20917b35e50176843_2682214_800x600_fit_catmullrom_2.png alt></figure><ol start=13><li><p>Exit out of the pipeline editing UI, save your changes, and try to home again. With your vision pipeline tuned, the machine should find the homing fiducial on your machine and center the crosshairs of the top camera on it.</p></li><li><p>It is likely that the machine will move to the wrong place and not be able to identify the homing fiducial. If this happens, OpenPnP will give an error popup that says <code>FIDUCIAL-HOME no matches found</code>. This is normal, as it means you&rsquo;ll need to fine-tune the location that OpenPnP moves the LumenPnP to in order to find the homing fiducial. You&rsquo;ll also note that the home icon will turn yellow, as the LumenPnP has homed to the end stops, but hasn&rsquo;t completed the full homing routine.<figure><img src=https://docs.opulo.io/openpnp/calibration/homing-fiducial/images/Cant-find-homing-fiducial_hu360a7de5d65a620e45f97581a1ebd17c_397783_800x600_fit_catmullrom_2.png alt="A first attempt at homing the LumenPnP"></figure></p></li></ol><div class="alert alert-info" role=alert><h4 class=alert-heading>Note</h4>Once your machine succeeds in finding the homing fiducial, the homing procedure will continue, and will try to detect a nozzle on your toolhead. This will fail, and you will receive the error: <code>Nozzle tip calibration: too many vision misdetects. Check pipeline and threshold.</code> This is expected, and if you see this you can move onto <a href=/openpnp/calibration/mm-per-pixel/>MM/Pixel calibration</a>.</div><div class="text-muted mt-5 pt-3 border-top">Last modified September 23, 2022: <a href=https://github.com/opulo-inc/docs/commit/a5c184e81891e07fe80ec0cc6e229c6dcf94cb9f>adds edits to calibration so that it supports both v2 and v3 hardware (a5c184e)</a></div></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter><a class=text-white target=_blank rel="noopener noreferrer" href=https://twitter.com/stephen_hawes_><i class="fab fa-twitter"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Instagram aria-label=Instagram><a class=text-white target=_blank rel="noopener noreferrer" href=https://www.instagram.com/_stephen.hawes_/><i class="fab fa-instagram"></i></a></li></ul></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel="noopener noreferrer" href=https://github.com/opulo-inc/lumenpnp><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Discord aria-label=Discord><a class=text-white target=_blank rel="noopener noreferrer" href=https://discordapp.com/invite/TCwy6De><i class="fab fa-discord"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"></div></div></div></footer></div><script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js integrity=sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s crossorigin=anonymous></script><script src=/js/main.min.f820bfc507c3ebefe17f8881ec4ee10013f3b89ad9555a50acf9bb1771e6823f.js integrity="sha256-+CC/xQfD6+/hf4iB7E7hABPzuJrZVVpQrPm7F3Hmgj8=" crossorigin=anonymous></script></body></html>